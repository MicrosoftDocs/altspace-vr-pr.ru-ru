---
title: Обновление старых проектов Unity
description: Узнайте, как обновить содержимое до последней версии Unity.
ms.date: 10/19/2021
ms.topic: article
keywords: наборы, мировые, Unity, обновление, шейдеры, отправку, устранение неполадок
ms.openlocfilehash: 06af70164e5bf870a10bf1ee9e949e09dfa69fd2
ms.sourcegitcommit: 8c58f9f9ad1a3f9534141dee2c78e32792d0db7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2021
ms.locfileid: "130302410"
---
<a name="upgrading-old-unity-projects"></a>Обновление старых проектов Unity
=============================

В течение многих лет Алтспацевро несколько редких обновлений, которые требуют от пользователей изменения их содержимого. Если вы обнаружите, что шаблон или пакет, который вы ранее отправили в прошлом, недоступен в последней версии Алтспацевр, следуйте указаниям в этом разделе, чтобы снова запустить свое содержимое.

> [!NOTE]
> Перед выполнением действий, описанных в этом руководстве, необходимо создать полную резервную копию проекта на случай, если обновление не будет беспрепятственно работать. Самый простой способ — создать вторую копию всей папки проекта. Для более расширенного решения рекомендуется использовать систему управления версиями, например Git и GitHub.

<a name="overview"></a>Обзор
---------

На момент написания этой статьи в текущей версии Алтспацевр используется следующая конфигурация:

* Модуль игры: Unity 2020.3.18 F1 (также приемлем: Unity 2020.3.9 F1)
* Upload Инструмент: Отгрузка 2,2
* Подготовка к просмотру: универсальный конвейер отрисовки (URP)
* Стерео режим: Single-Pass создание экземпляров (SPI) или просмотр в Quest

Если версия Unity проекта старше 2020,3, возможно, потребуется выполнить все эти обновления одновременно, поэтому следуйте указаниям в этом разделе. Если вы уже используете Unity 2020,3, но с отправкой 0,9, начните с шага 6.

1. Создание **резервной копии проекта** . Создайте копию всего каталога проекта и сохраните ее в безопасном месте. Это обновление является обратимым обновлением, поэтому исходные файлы проекта будут утеряны после завершения.
    Если во время этого обновления возникают какие-либо проблемы, вам потребуется чистая копия проекта, чтобы вернуться к работе.

2. **Удалить старый загрузчик** — выполните этот шаг, если в проекте используется алтспацеврный загрузчик 0,8 или более ранняя версия. При закрытии Unity удалите следующие файлы и папки, соответствующие мета-файлы. Если файл или папка не существуют, просто пропустите ее.

    * Активы/Алтспаце
    * Активы и подключаемые модули
    * Активы/Prefabs/тест-папка
    * Активы/Prefabs/Readme.txt
    * Assets/Resources/BG. JPEG
    * Активы/Resources/bg2. JPEG
    * Активы/ресурсы/logo.png
    * Активы/Resources/Усерпреференцес. Asset
    * Активы/DFloor_v004. FBX

3. **Удалить обработанные ресурсы** — выполните этот шаг, если выполняется обновление до новой версии Unity. При закрытии Unity удалите папку библиотеки из проекта. Это системная папка Unity, содержащая активы и файлы конкретных ядер, которые автоматически создаются из содержимого папки Assets (помимо прочего).

4. **Версия модуля загрузки** — выполните этот шаг, если выполняется обновление до новой версии Unity. Откройте центр Unity и установите Unity 2020.3.18 F1 из скачанного архива ([ссылка на установку подсистемы](unityhub://2020.3.18f1/a7d1c678663c)).
    * при создании на Windows компьютере установите флажки для поддержки сборки Android и Mac.
    * при создании на компьютере Mac установите флажки для поддержки сборки для Android и Windows.

5. **Обновление проекта** — откройте очищенный проект в Unity 2020.3.18 F1 и разрешите Unity обновить проект.
    Это может занять некоторое время.

6. **Скачайте загрузчик** . Скачайте последнюю версию этого загрузчика [и сохраните](https://aka.ms/AvrUrpUploader)его в папке Packages своего проекта. Файл должен иметь расширение ". tgz".
    > [!NOTE]
    > Если вы используете браузер Safari для скачивания, он будет извлечен в файл ". tar", который Unity не сможет использовать. Можно использовать другой браузер для загрузки или использовать системную служебную программу gzip для повторного сжатия.
    
7. **Установка** отправителя. Установите загрузчик из диспетчера пакетов редактора Unity:
    1. откройте окно диспетчер пакетов Unity: Windows > диспетчер пакетов
    2. В левом верхнем углу окна щелкните значок "+" и выберите "добавить пакет из tarball".
    3. Выберите файл TGZ, скачанный на предыдущем шаге.
    4. Дождитесь, пока Unity распаковать пакет.

8. **Открыть ОТправку** . Если установка прошла успешно, в верхней панели появится меню "алтспацевр".
    Это меню содержит отдельные окна для комплектов и шаблонов. Откройте наиболее подходящий проект.
    При первом открытии окна будут настроены параметры проекта в соответствии с Алтспаце Game Client: включение универсального конвейера рендеринга и Single-Pass создание экземпляров

9. **Исправление шейдеров** . при первом запуске программы установки окно PowerShell может отображаться временно.
    Вам может быть предложено обновить некоторые из пользовательских или загруженных шейдеров. При утверждении запроса сценарий PowerShell автоматически попытается обновить шейдеры, но вероятность успеха будет мала. Необходимо вручную проверить, правильно ли работает шейдер в URP.

10. **Исправление материалов** . Некоторые или все материалы могут быть розовыми или пурпурными в процессе обновления. Это указывает на ошибку в шейдере, используемом этим материалом. если вы использовали встроенные шейдеры Unity, обычно их можно автоматически перенести в URP-совместимые шейдеры из меню: правка > рендеринг конвейера > универсальный конвейер рендеринга > обновление Project материалов до универсалрпных материалов.

11. **Сборка и передача** . в этот момент проект должен быть полностью обновлен. Следуйте инструкциям в разделе [Начало работы](world-building-toolkit-getting-started.md) Guide, чтобы создать и загрузить комплект или шаблон.

<a name="troubleshooting-tips"></a>Советы по устранению неполадок
---------------------

1. Если обнаруживается, что содержимое отображается только в одном глазе в режиме VR, то, скорее всего, настраиваемые шейдеры не поддерживают рендеринг SPI. Вам потребуется выбрать другой шейдер или воспользоваться [руководством по обновлению SPI в Unity](https://docs.unity3d.com/Manual/SinglePassInstancing.html) , чтобы вручную изменить шейдер и добавить поддержку.

2. Если вы обнаружите, что часть содержимого является розовой или пурпурной в игре или полностью невидима, это может быть вызвано тем, что шейдер несовместим с URP. Необходимо либо заменить шейдер, либо обновить его самостоятельно.